<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AP Chemistry Course Guide</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- Top Navigation Bar -->
  <div id="topbar-container"></div>

  <!-- Sidebar -->
  <div id="sidebar-container"></div>

  <div class="container">
    <!-- Intro Box -->
    <div class="box">
      <h1>Welcome to the Sample AP Chemistry Study Guide</h1>
      <p>
        Created by a former AP Chem student who scored a 5 on the exam, this site is designed to help you understand every concept in each unit, as well as the types of questions you will be expected to answer on your AP exam. All content in this course is based directly on information from the College Board CED and AP Classroom.
      </p>
    </div>

    <!-- Unit Links Box -->
    <div class="box">
      <h2>AP Chem Unit Notes and Practice Tests</h2>
      <ul>
        <li><a href="unit-1-atomic-structure.html">Unit 1: Atomic Structure and Properties</a></li>
        <li><a href="unit2.html">Unit 2: Compound Structure and Properties</a></li>
        <li><a href="unit3.html">Unit 3: Properties of Substances and Mixtures</a></li>
        <li><a href="unit4.html">Unit 4: Chemical Reactions</a></li>
        <li><a href="unit5.html">Unit 5: Kinetics</a></li>
        <li><a href="unit6.html">Unit 6: Thermochemistry</a></li>
        <li><a href="unit7.html">Unit 7: Equilibrium</a></li>
        <li><a href="unit8.html">Unit 8: Acids and Bases</a></li>
        <li><a href="unit9.html">Unit 9: Thermodynamics and Electrochemistry</a></li>
        <!-- Add more units as needed -->
      </ul>
    </div>

    <!-- Format Box (restored to your original content) -->
    <div class="box">
      <h2>AP Chemistry Course Exam Format</h2>
      <ul>
        <li><strong>Section I: Multiple Choice (MCQ)</strong>
          <ul>
            <li>60 questions</li>
            <li>90 minutes</li>
            <li>50% of exam score</li>
          </ul>
        </li>
        <li><strong>Section II: Free Response (FRQ)</strong>
          <ul>
            <li>7 questions (3 long, 4 short)</li>
            <li>105 minutes</li>
            <li>50% of exam score</li>
          </ul>
        </li>
      </ul>
      <p>
        <strong>Exam Details:</strong><br>
        Both sections allow a scientific calculator and the official AP Chemistry formula sheet.<br>
        Total exam time is roughly 3 hours and 15 minutes with a brief break between the multiple choice section and free response section.<br>
      </p>
    </div>

    <!-- Countdown Box -->
    <div class="box">
      <div class="countdown" id="countdownText">
        Loading countdown...
      </div>
    </div>
  </div>















  

  <!-- Sign in Modal -->
  <!-- Sign-in Modal -->
<div id="modalSignIn" class="modal">
  <div class="modal-content">
    <span class="close" id="closeSignInModal">&times;</span>
    <h2>Sign In to Your Account</h2>
    <div class="tab-buttons">
      <button id="tabSignIn" class="tab-btn active">Sign In</button>
      <button id="tabRegister" class="tab-btn">Register</button>
    </div>
    <form id="emailAuthForm">
      <input type="email" id="authEmail" placeholder="Email" required>
      <input type="password" id="authPassword" placeholder="Password" required>
      <button type="submit" id="submitAuthBtn">Sign In</button>
      <div id="authError" class="error-message"></div>
    </form>
    <div class="modal-divider">
  <span class="modal-line"></span>
  <span class="modal-divider-text">or</span>
  <span class="modal-line"></span>
</div>
    <button id="googleSignInBtn" class="google-signin-btn">
      <svg width="20" height="20" viewBox="0 0 48 48" style="vertical-align:middle;margin-right:8px">
  <g>
    <path fill="#4285F4" d="M44.5 20H24v8.5h11.7C34.4 33.2 29.7 36 24 36c-6.6 0-12-5.4-12-12s5.4-12 12-12c3.1 0 6 .9 8.3 2.7l6.2-6.2C34.4 7.3 29.5 5 24 5 12.5 5 3 14.5 3 26s9.5 21 21 21c10.7 0 18.7-7.4 18.7-17.7 0-1.2-.1-2.3-.3-3.3z"/>
    <path fill="#34A853" d="M6.7 14.1l6.6 4.8C15.3 16.1 19.4 13.8 24 13.8c3.1 0 6 .9 8.3 2.7l6.2-6.2C34.4 7.3 29.5 5 24 5c-6.6 0-12 5.4-12 12 0 2.5.7 4.7 1.7 6.7z"/>
    <path fill="#FBBC05" d="M24 43c5.7 0 10.4-1.8 13.7-4.9l-6.6-5.4c-2.1 1.4-4.8 2.3-7.1 2.3-4.7 0-8.8-2.9-10.7-7.1l-6.6 5.1C10.6 39.9 16.9 43 24 43z"/>
    <path fill="#EA4335" d="M44.5 20H24v8.5h11.7c-1.1 3.1-4.5 8.5-11.7 8.5-3.1 0-6-.9-8.3-2.7l-6.2 6.2C13.6 38.7 18.5 41 24 41c10.7 0 18.7-7.4 18.7-17.7 0-1.2-.1-2.3-.3-3.3z"/>
  </g>
</svg>
      Sign in with Google
    </button>
  </div>
</div>

  <!-- Bottom Bar for Index Page -->
  <div id="indexBottomBar" class="bottom-bar">
    <div class="bottom-bar-left" id="bottomBarLeft"></div>
    <div class="bottom-bar-center"></div>
    <div class="bottom-bar-right">
      <button id="futureFeatureBtn" disabled>Future Feature</button>
    </div>
  </div>

  <!-- Utility scripts -->

<script type="module">
import { loadTopbar } from './topbar.js';
  loadTopbar("AP Chemistry Study Guide and Practice Tests"); // Change per page
  
  import {
    onAuthChange, signInHandler, signOutHandler, setupUsernameModal, ensureUsernameOnLogin
  } from './auth.js';

  setupUsernameModal();

  onAuthChange(async user => {
    await ensureUsernameOnLogin();
    // Update UI, bottom bar, etc.
  });

  document.getElementById("sidebarSignInBtn").onclick = signInHandler;
  // Add similar for signOutBtn in bottom bar if present
</script>

<!-- END GOOD -->



  
  <script src="util.js" defer></script>
  <script>
    window.addEventListener('DOMContentLoaded', function() {
      renderCountdown("countdownText", "May 5, 2026");
    });
  </script>

  <!-- Modular Firebase Auth and UI Logic -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-app.js";
import {
  getAuth,
  onAuthStateChanged,
  GoogleAuthProvider,
  signInWithPopup,
  signOut,
  createUserWithEmailAndPassword,
  signInWithEmailAndPassword
} from "https://www.gstatic.com/firebasejs/12.1.0/firebase-auth.js";
import { getFirestore, doc, setDoc, getDoc } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-firestore.js";

// --- Firebase Setup ---
const firebaseConfig = {
  apiKey: "AIzaSyAErba8GYZi2DeP0i0aE-39ZCwZQvlskQw",
  authDomain: "ap-chem-course-guide.firebaseapp.com",
  projectId: "ap-chem-course-guide",
  storageBucket: "ap-chem-course-guide.appspot.com",
  messagingSenderId: "601341546125",
  appId: "1:601341546125:web:152f1fb623c69351c81cc4",
  measurementId: "G-X2H058B7KT"
};
const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const provider = new GoogleAuthProvider();
provider.setCustomParameters({ prompt: "select_account" });
const db = getFirestore(app);

// --- Bottom Bar Auth Buttons ---
function updateIndexBarAuthButtons() {
  const leftDiv = document.getElementById("bottomBarLeft");
  leftDiv.innerHTML = "";
  if (window.isSignedIn) {
    const signOutBtn = document.createElement("button");
    signOutBtn.textContent = "Sign Out";
    signOutBtn.onclick = () => {
      signOut(auth).then(() => {
        window.isSignedIn = false;
        updateIndexBarAuthButtons();
        location.reload();
      });
    };
    leftDiv.appendChild(signOutBtn);

    const changeUsernameBtn = document.createElement("button");
    changeUsernameBtn.textContent = "Change Username";
    changeUsernameBtn.onclick = () => {
      document.getElementById("usernameModal").style.display = "block";
      document.getElementById("usernameInput").focus();
    };
    leftDiv.appendChild(changeUsernameBtn);
  } else {
    const signUpBtn = document.createElement("button");
    signUpBtn.textContent = "Sign Up";
    signUpBtn.onclick = () => {
      signInWithPopup(auth, provider)
        .then(result => {
          window.isSignedIn = true;
          updateIndexBarAuthButtons();
          checkUsername(result.user);
        })
        .catch(error => {
          alert("Sign-in failed!");
        });
    };
    leftDiv.appendChild(signUpBtn);
  }
}

// --- Username Modal Logic ---
async function checkUsername(user) {
  const usernameModal = document.getElementById("usernameModal");
  const usernameInput = document.getElementById("usernameInput");
  if (!user || !user.uid) {
    usernameModal.style.display = "none";
    return;
  }
  const userRef = doc(db, "users", user.uid);
  const snapshot = await getDoc(userRef);
  if (!snapshot.exists() || !snapshot.data().username) {
    usernameModal.style.display = "block";
    usernameInput.focus();
  } else {
    usernameModal.style.display = "none";
  }
}
async function isUsernameTaken(username) {
  // Optionally implement username check if you want
  return false;
}

document.addEventListener('DOMContentLoaded', () => {
  updateIndexBarAuthButtons();

  // Username modal logic
  const usernameModal = document.getElementById('usernameModal');
  const closeUsernameModal = document.getElementById('closeUsernameModal');
  const saveUsernameBtn = document.getElementById('saveUsernameBtn');
  const usernameInput = document.getElementById('usernameInput');
  closeUsernameModal.onclick = () => { usernameModal.style.display = 'none'; };
  saveUsernameBtn.onclick = async () => {
    const newUsername = usernameInput.value.trim();
    if (newUsername && window.isSignedIn && auth.currentUser) {
      try {
        const userRef = doc(db, "users", auth.currentUser.uid);
        await setDoc(userRef, { username: newUsername }, { merge: true });
        usernameModal.style.display = 'none';
      } catch (e) {
        alert("Could not save username.");
      }
    } else {
      alert("Please sign in first!");
    }
  };
});

// --- Auth State Listener ---
onAuthStateChanged(auth, (user) => {
  window.isSignedIn = !!user;
  updateIndexBarAuthButtons();
  if (user) checkUsername(user);
});
</script>
 
</body>
</html>
